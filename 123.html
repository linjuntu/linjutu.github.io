<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
   
  <script src="setting.js"></script>
  <script src="Cookie.js"></script> 
  <script src="dateTime.js"></script> 
  <script src="HTTP2024.js"></script>

 <script>

  var jsonObj = {
  "resourceType": "Observation",
  "id": "example-observation-1",
  "meta": {
    "profile": ["http://hl7.org/fhir/StructureDefinition/bone-density"]
  },
  "status": "final",
  "code": {
    "coding": [
      {
        "system": "http://loinc.org",
        "code": "41902-2",
        "display": "Bone density"
      }
    ]
  },
  "subject": {
    "reference": "Patient/1478659",
    "display":"林俊宇"
  },
  "effectiveDateTime": "2023-10-13T08:00:00-07:00",
  "valueQuantity": {
    "value": 0.65,
    "unit": "",
    "system": "http://unitsofmeasure.org",
    "code": ""
  },
  "interpretation": [
    {
      "coding": [
        {
          "system": "http://terminology.hl7.org/CodeSystem/v3-ObservationInterpretation",
          "code": "L",
          "display": "Low"
        }
      ],
      "text": "Low bone density"
    }
  ]
};

  
   function postData()
   { 
    jsonObj.valueQuantity.value = parseFloat(document.getElementById("Bilirubin").value);
    jsonObj.subject.display = document.getElementById("name").value;
     jsonObj.effectiveDateTime = getFormattedTime();
     alert(jsonObj.valueQuantity.value);
     alert(jsonObj.subject.display);
     var jsonStr = JSON.stringify(jsonObj);
    var apiURL;
    apiURL = FHIRrootURL  + "Observation";

  
    sendHttpPost(apiURL, jsonStr, callBlack);
   } 
   function callBlack(ret) 
   {
    alert(ret);
        console.log(ret);    
        }
 
 
</script> 
 
</head>
<body style="height: 780px">
 
    <p>請輸入膽紅素值</p>
   
     <input id="Button1" onclick="postData()"  type="button" value="postData" /><br/>
     
     膽紅素值: <input type="text" id="Bilirubin" />  <br/>
     姓名: <input type="text" id="name" />  <br/>
     <ul>
      <li><a href="Index.html">返回</a></li>
     </ul>
  
</body>

</html>